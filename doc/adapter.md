## 集成
Urbs 支持扩展集成到，使用者现有的用户体系中，便于与现有系统整合。

主要分二大块：

一、是在访问灰度管理后台的身份验证、权限控制。

二、是获取用户配置项的身份验证。

其一和二的身份验证是同一套用户体系。

## API 身份验证

Urbs 没有单独的用户登录模块，主要考虑的是接入方一般都有自己的用户登陆体系，和已有体系整合的方便性远大于独立的一套。所以 Urbs 定义了一套 API 规范，使用方在接入时实现接口，即可对访问的用户进行身份验证。

验证流程：

1. 访问 Urbs API，比如 urbs.teambition.com/v1/users/settings:unionAll；
2. Urbs API携带身份（cookie）通过 http 的方式请求接入方实现的接口；
3. 接口验证身份（cookie）成功则返回用户信息，失败返回错误表示验证失败；

### 步骤

一、配置接口：

```
thrid:
    key: "a29b3a29b3a29b30x1a29b38"
    user_auth: 
        url: "已实现的接口地址，比如 http://local:8080//v1/users:verify"
        cookie_key: "要读取的 cookie 名称，会携带给接口"

```

二、Urbs 使用 POST 方式请求 API
携带的 `Body` 参数：

```json
{
  "cookie": "cookie",
  "signed": "cookie 的签名，Urbs 自动读取 cookie_key.sig 名字的 cookie 值，携带到，没有则为空"
}
```
需要返回 `json` 格式的数据：
```json
{
    "result": "用户标识"
}
```

Urbs 通过返回的用户标示去查询名下的配置项。

## 后台身份验证

后台身份验证相比 API 身份证多了一步，拿到用户标识后，再去查用户是否有访问后台界面的权限，用户的权限由超级管理员添加。

超级管理员可以在配置添加：

```yaml
superAdmins: ["用户标识"]
```

用户的后台浏览权限，可在后台 `管理` 中添加。用户的具体某项操作权限可以通过添加负责人添加。比如：

超级管理员创建个产品，指定 A 为负责人，A 即可更新产品、创建其下的模块1。 

A 可以指定 B 为模块1 负责人，然后 B 可以更新模块、创建配置项， B 也可以指定其下配置项的负责人。

权限不可以继承 ，产品的负责人，不可以操作其下的模块，如需要的话，在创建模块时，指定自己也为模块负责人。

