## 产品

灰度系统的产品，仅以 name 标记，name 是系统内唯一，主要用于灰度配置隔离。比如一个灰度系统中可以包含 teambition、thoughts 等不同产品，每个产品有自己的灰度配置策略。

Urbs 支持两种灰度方式，标签的灰度和配置项的灰度。

### 标签

适用于 A/B Testing 场景下，创建标签后，可以发布标签到用户或群组上。Traefik 网关会把用户路由到标签所对应的环境。

### 功能模块&配置项

适用于前端某个功能灰度的场景。创建配置项后，可以发布标签到用户或群组上。前端通过 API 获取当前用户的配置项，根据配置项值来控制功能的灰度。

配置项的可选值是字符串格式，多个值用`,`分割，常见类型有：

- 开关类型："true","false"
- 枚举类型："feature1","feature2","feature3"

发布配置项时，可以选择具体的值，分配到用户或群组上。

配置项的端类型有 web、ios、android 三种，来控制当前配置项作用于哪个端。前端通过 API 获取配置项时，可指定端类型参数，来筛选本端的配置项。 比如移动端 ios 通过参数 client = ios，来获取本端的配置项。

## 用户范围

Urbs 支持用户、群组、访问用户百分比，来控制灰度用户范围。发布灰度时，选定的用户、群组必须在 Urbs 系统里存在。

添加用户、群组到 Urbs 系统的方式有：

- 少量用户和群组，可以在管控后台通过 UI 添加。
- 大量用户和群组，通过管控后台 API，批量添加。
- 增量用户和群组，通过定时同步、Webhook 、oplog / binlog 等方式监听已有用户系统的数据，同步到 Urbs 系统。

